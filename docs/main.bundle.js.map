{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://timeline/webpack/runtime/chunk loaded","webpack://timeline/./src/canvas/Properties.js","webpack://timeline/./src/Parser.ts","webpack://timeline/./src/canvas/HistoryCanvas.ts","webpack://timeline/./src/canvas/InteractiveCanvas.ts","webpack://timeline/./src/models/Era.ts","webpack://timeline/./src/models/Event.ts","webpack://timeline/./src/models/Facet.ts","webpack://timeline/./src/models/Orderable.ts","webpack://timeline/./src/models/Person.ts","webpack://timeline/./src/renderers/EraRenderer.ts","webpack://timeline/./src/renderers/EventRenderer.ts","webpack://timeline/./src/renderers/FacetRenderer.ts","webpack://timeline/./src/renderers/Lanes.ts","webpack://timeline/./src/renderers/PersonRenderer.ts","webpack://timeline/./src/renderers/Renderer.ts","webpack://timeline/./src/timelines.ts","webpack://timeline/webpack/bootstrap","webpack://timeline/webpack/runtime/compat get default export","webpack://timeline/webpack/runtime/define property getters","webpack://timeline/webpack/runtime/hasOwnProperty shorthand","webpack://timeline/webpack/runtime/make namespace object","webpack://timeline/webpack/runtime/jsonp chunk loading","webpack://timeline/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import chroma from 'chroma-js'\nimport {DateTime} from \"luxon\";\n\nexport const LANE_HEIGHT = 20\nexport const GRID_COLOR = chroma('lightgrey')\nexport const HOVER_COLOR = chroma('darkgrey')\nexport const BACKGROUND_COLOR = chroma('white')\nexport const DATE_SCALE_FACTOR = 3\nexport const DATE_SCALE_UNIT = 'months'\nexport const DATE_ORIGIN = DateTime.fromISO('0000-01-01')\nexport const FIRST_TICK = DateTime.fromISO('-007000')\nexport const LAST_TICK = DateTime.local()\n\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = void 0;\nvar chroma_js_1 = __importDefault(require(\"chroma-js\"));\nvar Person_1 = require(\"./models/Person\");\nvar Era_1 = require(\"./models/Era\");\nvar Event_1 = require(\"./models/Event\");\nvar Facet_1 = require(\"./models/Facet\");\nvar luxon_1 = require(\"luxon\");\nvar Parser = /** @class */ (function () {\n    function Parser() {\n    }\n    Parser.prototype.parseData = function (data) {\n        var _this = this;\n        var facets = Object.keys(data).map(function (facetName) {\n            return new Facet_1.Facet(facetName, (data[facetName].eras || []).map(function (it) { return _this.parseEra(it); }), (data[facetName].people || []).map(function (it) { return _this.parsePerson(it); }), (data[facetName].events || []).map(function (it) { return _this.parseEvent(it); }));\n        }).sort(function (one, two) { return one.orderByStart(two); });\n        this.setColors(facets);\n        return facets;\n    };\n    Parser.prototype.setColors = function (facets) {\n        var colorScale = chroma_js_1.default.scale('Viridis').domain([0, facets.length - 1]);\n        facets.forEach(function (it, index) {\n            it.basecolor = colorScale(index);\n        });\n    };\n    Parser.prototype.parseEra = function (_a) {\n        var name = _a.name, start = _a.start, end = _a.end, _b = _a.url, url = _b === void 0 ? '' : _b;\n        return new Era_1.Era(name, this.parseDate(start), this.parseDate(end), url);\n    };\n    Parser.prototype.parsePerson = function (_a) {\n        var _this = this;\n        var name = _a.name, birth = _a.birth, death = _a.death, url = _a.url, _b = _a.events, events = _b === void 0 ? [] : _b, _c = _a.short_name, short_name = _c === void 0 ? '' : _c;\n        return new Person_1.Person(name, this.parseDate(birth), this.parseDate(death), url, events.map(function (it) { return _this.parseEvent(it); }), short_name === '' ? name : short_name);\n    };\n    Parser.prototype.parseEvent = function (_a) {\n        var name = _a.name, date = _a.date, url = _a.url;\n        return new Event_1.Event(name, this.parseDate(date), url);\n    };\n    Parser.prototype.parseDate = function (string) {\n        if (string === 'now') {\n            return luxon_1.DateTime.local();\n        }\n        else if (string.startsWith('-')) {\n            return luxon_1.DateTime.fromISO(\"-00\".concat(string.substr(1)));\n        }\n        return luxon_1.DateTime.fromISO(string);\n    };\n    return Parser;\n}());\nexports.Parser = Parser;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HistoryCanvas = void 0;\nvar fabric_1 = require(\"fabric\");\nvar Properties_1 = require(\"./Properties\");\nvar FacetRenderer_1 = require(\"../renderers/FacetRenderer\");\nvar luxon_1 = require(\"luxon\");\nvar HistoryCanvas = /** @class */ (function (_super) {\n    __extends(HistoryCanvas, _super);\n    function HistoryCanvas() {\n        var _this = _super.call(this, 'canvas') || this;\n        fabric_1.fabric.Object.prototype.selectable = false;\n        fabric_1.fabric.Textbox.prototype.editable = false;\n        fabric_1.fabric.Textbox.prototype.fontFamily = 'sans';\n        _this.initializeCanvas();\n        return _this;\n    }\n    HistoryCanvas.prototype.initializeCanvas = function () {\n        this.setDimensions({ width: window.innerWidth, height: window.innerHeight });\n        this.hoverCursor = 'default';\n        this.selection = false;\n        this.absolutePan(new fabric_1.fabric.Point(HistoryCanvas.calculateAbsoluteX(luxon_1.DateTime.fromISO('1500-01-01')), 0));\n        this.renderOnAddRemove = false;\n        this.ticks = [];\n    };\n    HistoryCanvas.prototype.getItem = function (id) {\n        for (var i = 0, len = _super.prototype.size.call(this); i < len; i++) {\n            if (this.getObjects()[i].id && this.getObjects()[i].id === id) {\n                return this.getObjects()[i];\n            }\n        }\n    };\n    HistoryCanvas.prototype.render = function (facets) {\n        this.renderGrid();\n        this.renderData(facets.sort(function (one, two) { return one.orderByStart(two); }));\n        this.requestRenderAll();\n    };\n    HistoryCanvas.prototype.renderGrid = function () {\n        this.remove.apply(this, this.ticks);\n        this.ticks.length = 0;\n        for (var currentTick = Properties_1.FIRST_TICK; currentTick < Properties_1.LAST_TICK; currentTick = currentTick.plus(this.periodBetweenTicks())) {\n            var x = HistoryCanvas.calculateAbsoluteX(currentTick);\n            var line = new fabric_1.fabric.Line([\n                x,\n                -this.viewportTransform[5] / this.viewportTransform[3],\n                x,\n                (-this.viewportTransform[5] + window.innerHeight) / this.viewportTransform[3]\n            ], {\n                stroke: Properties_1.GRID_COLOR.hex(),\n                strokeWidth: 1\n            });\n            var label = new fabric_1.fabric.Textbox(currentTick.year.toString(), {\n                left: x,\n                top: (-this.viewportTransform[5] + window.innerHeight - Properties_1.LANE_HEIGHT) / this.viewportTransform[3],\n                originX: 'center',\n                originY: 'center',\n                fontSize: (Properties_1.LANE_HEIGHT - 4) / this.viewportTransform[3],\n                textAlign: 'center',\n                strokeWidth: 0,\n                fill: Properties_1.GRID_COLOR.hex(),\n                textBackgroundColor: Properties_1.BACKGROUND_COLOR.hex()\n            });\n            var gridline = new fabric_1.fabric.Group([line, label]);\n            this.insertAt(gridline, 1, false);\n            this.ticks.push(gridline);\n        }\n    };\n    HistoryCanvas.prototype.periodBetweenTicks = function () {\n        return luxon_1.Duration.fromObject({ years: 25 / this.getZoom() });\n    };\n    HistoryCanvas.prototype.tickCount = function () {\n        return this.ticks.length - 1;\n    };\n    HistoryCanvas.prototype.renderData = function (facets) {\n        var _this = this;\n        facets.reduce(function (offset, facet) { return new FacetRenderer_1.FacetRenderer(_this, facet).render(offset); }, 0);\n        this.renderAll();\n    };\n    HistoryCanvas.calculateAbsoluteX = function (date) {\n        return HistoryCanvas.calculateRelativeX(Properties_1.DATE_ORIGIN, date);\n    };\n    HistoryCanvas.calculateRelativeX = function (start, end) {\n        return end.diff(start, Properties_1.DATE_SCALE_UNIT).as(Properties_1.DATE_SCALE_UNIT) / Properties_1.DATE_SCALE_FACTOR;\n    };\n    return HistoryCanvas;\n}(fabric_1.fabric.Canvas));\nexports.HistoryCanvas = HistoryCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InteractiveCanvas = void 0;\nvar fabric_1 = require(\"fabric\");\nvar chroma_js_1 = __importDefault(require(\"chroma-js\"));\nvar HistoryCanvas_1 = require(\"./HistoryCanvas\");\nvar Properties_1 = require(\"./Properties\");\nvar InteractiveCanvas = /** @class */ (function (_super) {\n    __extends(InteractiveCanvas, _super);\n    function InteractiveCanvas() {\n        var _this = _super.call(this) || this;\n        _this.supportResizing();\n        _this.addWheel();\n        _this.addHover();\n        _this.addTooltips();\n        _this.addWikipediaLinks();\n        _this.addKeyboardControl();\n        return _this;\n    }\n    InteractiveCanvas.prototype.supportResizing = function () {\n        var that = this;\n        window.onresize = function () {\n            that.setDimensions({ width: window.innerWidth, height: window.innerHeight });\n            that.renderGrid();\n            that.requestRenderAll();\n        };\n    };\n    InteractiveCanvas.prototype.addWheel = function () {\n        var that = this;\n        this.on('mouse:wheel', function (event) {\n            var wheelEvent = event.e;\n            if (wheelEvent.ctrlKey) {\n                that._relativeZoom(wheelEvent.deltaY / 20, new fabric_1.fabric.Point(wheelEvent.offsetX, wheelEvent.offsetY));\n            }\n            else {\n                that._pan(wheelEvent.deltaY * 5, 0);\n            }\n            event.e.preventDefault();\n            event.e.stopPropagation();\n        });\n    };\n    InteractiveCanvas.prototype._pan = function (amountHorizontal, amountVertical) {\n        var newX = InteractiveCanvas.clamp(HistoryCanvas_1.HistoryCanvas.calculateAbsoluteX(Properties_1.FIRST_TICK), amountHorizontal - this.viewportTransform[4], HistoryCanvas_1.HistoryCanvas.calculateAbsoluteX(Properties_1.LAST_TICK));\n        var newY = InteractiveCanvas.clamp(0, amountVertical - this.viewportTransform[5], 2 * window.innerHeight);\n        this.absolutePan(new fabric_1.fabric.Point(newX, newY));\n        if (newY > 0) {\n            this.renderGrid();\n        }\n        this.requestRenderAll();\n    };\n    InteractiveCanvas.prototype._relativeZoom = function (delta, point) {\n        this._absoluteZoom(this._calculateAbsoluteZoom(delta), point);\n    };\n    InteractiveCanvas.prototype._calculateAbsoluteZoom = function (delta) {\n        var zoom = this.getZoom();\n        return InteractiveCanvas.clamp(0.5, zoom + delta, 3);\n    };\n    InteractiveCanvas.prototype._absoluteZoom = function (absoluteZoom, point) {\n        this.zoomToPoint(point, absoluteZoom);\n        var original_viewportTransform = this.viewportTransform;\n        if (original_viewportTransform[5] >= 0) {\n            this.viewportTransform[5] = 0;\n        }\n        else if (Math.ceil(original_viewportTransform[5]) < Math.floor(this.getHeight() - window.innerHeight * absoluteZoom)) {\n            this.viewportTransform[5] = this.getHeight() - window.innerHeight * absoluteZoom;\n        }\n        this.renderGrid();\n        this.requestRenderAll();\n    };\n    InteractiveCanvas.prototype.addHover = function () {\n        var that = this;\n        var lineId = 'mouseline';\n        this.on('mouse:move', function (options) {\n            that.remove(that.getItem(lineId));\n            var p = that.getPointer(options.e);\n            var line = new fabric_1.fabric.Line([\n                p.x,\n                -that.viewportTransform[5] / that.viewportTransform[3],\n                p.x,\n                (-that.viewportTransform[5] + window.innerHeight) / that.viewportTransform[3]\n            ], {\n                stroke: Properties_1.HOVER_COLOR.hex(),\n                strokeWidth: 1\n            });\n            var label = new fabric_1.fabric.Textbox(Properties_1.DATE_ORIGIN.plus({ months: p.x * Properties_1.DATE_SCALE_FACTOR }).year.toString(), {\n                left: p.x,\n                top: (-that.viewportTransform[5] + window.innerHeight - Properties_1.LANE_HEIGHT) / that.viewportTransform[3],\n                originX: 'center',\n                originY: 'center',\n                fontSize: (Properties_1.LANE_HEIGHT - 4) / that.viewportTransform[3],\n                textAlign: 'center',\n                strokeWidth: 0,\n                fill: Properties_1.HOVER_COLOR.hex(),\n                textBackgroundColor: Properties_1.BACKGROUND_COLOR.hex()\n            });\n            var mouseLine = new fabric_1.fabric.Group([line, label], { id: lineId });\n            that.add(mouseLine);\n            mouseLine.moveTo(that.tickCount() + 1);\n            that.requestRenderAll();\n        });\n    };\n    InteractiveCanvas.prototype.addTooltips = function () {\n        var that = this;\n        this.on('mouse:over', function (event) {\n            if (event.target && event.target.tooltipText) {\n                var p = that.getPointer(event.e);\n                var tooltipText = new fabric_1.fabric.Textbox(event.target.tooltipText, {\n                    fontSize: Properties_1.LANE_HEIGHT - 7,\n                    textAlign: 'center',\n                    strokeWidth: 0,\n                    fill: 'black',\n                    width: 190,\n                    left: p.x,\n                    top: p.y - 7,\n                    originX: 'center',\n                    originY: 'bottom',\n                });\n                var tooltipBackground = new fabric_1.fabric.Rect({\n                    fill: (0, chroma_js_1.default)(event.target.fill).brighten(3).hex(),\n                    stroke: (0, chroma_js_1.default)(event.target.fill).hex(),\n                    strokeWidth: 1,\n                    width: tooltipText.width,\n                    height: tooltipText.height + 2,\n                    left: p.x,\n                    top: p.y - 5,\n                    originX: 'center',\n                    originY: 'bottom',\n                });\n                if (p.y < tooltipText.height + 10) {\n                    tooltipText.setOptions({\n                        originY: 'top',\n                        top: p.y + 15\n                    });\n                    tooltipBackground.setOptions({\n                        originY: 'top',\n                        top: p.y + 13\n                    });\n                }\n                var tooltip = new fabric_1.fabric.Group([tooltipBackground, tooltipText], { id: 'tooltip' });\n                that.add(tooltip);\n            }\n            that.requestRenderAll();\n        });\n        this.on('mouse:out', function () {\n            that.remove(that.getItem('tooltip'));\n            that.requestRenderAll();\n        });\n    };\n    InteractiveCanvas.prototype.addWikipediaLinks = function () {\n        this.on('mouse:down', function (event) {\n            if (event.target && event.target.url) {\n                window.open(event.target.url);\n            }\n        });\n    };\n    InteractiveCanvas.prototype.addKeyboardControl = function () {\n        var that = this;\n        document.onkeydown = function (e) {\n            switch (e.key) {\n                case 'ArrowLeft':\n                    that._pan(-30, 0);\n                    break;\n                case 'ArrowRight':\n                    that._pan(30, 0);\n                    break;\n                case 'ArrowUp':\n                    that._pan(0, -30);\n                    break;\n                case 'ArrowDown':\n                    that._pan(0, 30);\n                    break;\n                case '+':\n                    that._relativeZoom(0.25, new fabric_1.fabric.Point(0, 0));\n                    break;\n                case '-':\n                    that._relativeZoom(-0.25, new fabric_1.fabric.Point(0, 0));\n                    break;\n                case '0':\n                    that._absoluteZoom(1, new fabric_1.fabric.Point(0, 0));\n            }\n        };\n    };\n    InteractiveCanvas.clamp = function (min, value, max) {\n        return Math.max(min, Math.min(max, value));\n    };\n    return InteractiveCanvas;\n}(HistoryCanvas_1.HistoryCanvas));\nexports.InteractiveCanvas = InteractiveCanvas;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Era = void 0;\nvar Orderable_1 = require(\"./Orderable\");\nvar Era = /** @class */ (function (_super) {\n    __extends(Era, _super);\n    function Era(name, start, end, url) {\n        if (url === void 0) { url = ''; }\n        var _this = _super.call(this) || this;\n        _this.name = name;\n        _this.start = start;\n        _this.end = end;\n        _this.url = url;\n        return _this;\n    }\n    Era.prototype.left = function () {\n        return this.start;\n    };\n    Era.prototype.right = function () {\n        return this.end;\n    };\n    return Era;\n}(Orderable_1.Orderable));\nexports.Era = Era;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Event = void 0;\nvar Orderable_1 = require(\"./Orderable\");\nvar Event = /** @class */ (function (_super) {\n    __extends(Event, _super);\n    function Event(name, date, url) {\n        var _this = _super.call(this) || this;\n        _this.name = name;\n        _this.date = date;\n        _this.url = url;\n        return _this;\n    }\n    Event.prototype.left = function () {\n        return this.date;\n    };\n    Event.prototype.right = function () {\n        return this.date;\n    };\n    return Event;\n}(Orderable_1.Orderable));\nexports.Event = Event;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Facet = void 0;\nvar Orderable_1 = require(\"./Orderable\");\nvar Facet = /** @class */ (function (_super) {\n    __extends(Facet, _super);\n    function Facet(name, eras, people, events) {\n        var _this = _super.call(this) || this;\n        _this.name = name;\n        _this.eras = eras.sort(function (one, two) { return one.orderByStart(two); });\n        _this.people = people.sort(function (one, two) { return one.orderByStart(two); });\n        _this.events = events.sort(function (one, two) { return one.orderByStart(two); });\n        return _this;\n    }\n    Facet.prototype.left = function () {\n        return [this.eras[0], this.people[0], this.events[0]].sort(function (one, two) { return one.orderByStart(two); })[0].left();\n    };\n    Facet.prototype.right = function () {\n        return [this.eras, this.people, this.events].flat().sort(function (one, two) { return one.orderByEnd(two); })[0].right();\n    };\n    return Facet;\n}(Orderable_1.Orderable));\nexports.Facet = Facet;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Orderable = void 0;\nvar Orderable = /** @class */ (function () {\n    function Orderable() {\n    }\n    Orderable.prototype.orderByStart = function (other) {\n        return this.left() < other.left() ? -1\n            : this.left() > other.left() ? 1\n                : 0;\n    };\n    Orderable.prototype.orderByEnd = function (other) {\n        return this.right() > other.right() ? -1\n            : this.right() < other.right() ? 1\n                : 0;\n    };\n    return Orderable;\n}());\nexports.Orderable = Orderable;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Person = void 0;\nvar Orderable_1 = require(\"./Orderable\");\nvar Person = /** @class */ (function (_super) {\n    __extends(Person, _super);\n    function Person(name, birth, death, url, events, short_name) {\n        if (events === void 0) { events = []; }\n        if (short_name === void 0) { short_name = ''; }\n        var _this = _super.call(this) || this;\n        _this.name = name;\n        _this.birth = birth;\n        _this.death = death;\n        _this.url = url;\n        _this.events = events;\n        _this.shortName = short_name;\n        return _this;\n    }\n    Person.prototype.left = function () {\n        return this.birth;\n    };\n    Person.prototype.right = function () {\n        return this.death;\n    };\n    return Person;\n}(Orderable_1.Orderable));\nexports.Person = Person;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EraRenderer = void 0;\nvar Renderer_1 = require(\"./Renderer\");\nvar fabric_1 = require(\"fabric\");\nvar chroma_js_1 = __importDefault(require(\"chroma-js\"));\nvar HistoryCanvas_1 = require(\"../canvas/HistoryCanvas\");\nvar luxon_1 = require(\"luxon\");\nvar EraRenderer = /** @class */ (function (_super) {\n    __extends(EraRenderer, _super);\n    function EraRenderer(canvas, era) {\n        var _this = _super.call(this, canvas) || this;\n        _this.min_era_width_for_horizontal = HistoryCanvas_1.HistoryCanvas.calculateRelativeX(luxon_1.DateTime.fromISO('0001-01-01'), luxon_1.DateTime.fromISO('00031-01-01'));\n        _this.name = era.name;\n        _this.start = era.start;\n        _this.end = era.end;\n        _this.left = HistoryCanvas_1.HistoryCanvas.calculateAbsoluteX(era.start);\n        _this.width = HistoryCanvas_1.HistoryCanvas.calculateRelativeX(era.start, era.end);\n        return _this;\n    }\n    EraRenderer.prototype.render = function (offset, height, color) {\n        var rect = new fabric_1.fabric.Rect({\n            fill: color.brighten(0.2).alpha(0.1).hex(),\n            stroke: color.brighten(0.1).alpha(0.3).hex(),\n            strokeWidth: 2,\n            left: this.left,\n            width: this.width,\n            top: offset,\n            height: height\n        });\n        var isWideEnough = this.width > this.min_era_width_for_horizontal;\n        var label = new fabric_1.fabric.Textbox(this.name, {\n            left: this.left + this.width / 2,\n            width: isWideEnough ? Math.min(rect.width, 300) : height,\n            top: offset + height / 2,\n            originX: 'center',\n            originY: 'center',\n            angle: isWideEnough ? 0 : 270,\n            fontSize: this.LANE_HEIGHT,\n            textAlign: 'center',\n            strokeWidth: 0,\n            fill: (0, chroma_js_1.default)('darkgray').hex()\n        });\n        var eraGlyph = new fabric_1.fabric.Group([rect, label], {\n            tooltipText: \"\".concat(this.name, \"\\n\").concat(this.start.year, \" - \").concat(this.end.year),\n            fill: color.hex()\n        });\n        var canvas = this.canvas;\n        eraGlyph.on('mouseover', function () {\n            rect.setOptions({\n                stroke: (0, chroma_js_1.default)('grey').hex(),\n            });\n            canvas.requestRenderAll();\n        });\n        eraGlyph.on('mouseout', function () {\n            rect.setOptions({\n                stroke: color.brighten(0.1).alpha(0.3).hex(),\n            });\n            canvas.requestRenderAll();\n        });\n        this.canvas.add(eraGlyph);\n    };\n    return EraRenderer;\n}(Renderer_1.Renderer));\nexports.EraRenderer = EraRenderer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventRenderer = void 0;\nvar Renderer_1 = require(\"./Renderer\");\nvar fabric_1 = require(\"fabric\");\nvar HistoryCanvas_1 = require(\"../canvas/HistoryCanvas\");\nvar EventRenderer = /** @class */ (function (_super) {\n    __extends(EventRenderer, _super);\n    function EventRenderer(canvas, event) {\n        var _this = _super.call(this, canvas) || this;\n        _this.name = event.name;\n        _this.date = event.date;\n        _this.url = event.url;\n        _this.left = HistoryCanvas_1.HistoryCanvas.calculateAbsoluteX(event.date);\n        return _this;\n    }\n    EventRenderer.prototype.render = function (offset, color) {\n        var circle = new fabric_1.fabric.Circle({\n            fill: color.hex(),\n            left: this.left,\n            top: offset,\n            originX: 'center',\n            radius: this.LANE_HEIGHT / 2,\n            tooltipText: \"\".concat(this.name, \"\\n\").concat(this.date.year),\n            color: color.hex(),\n            url: this.url\n        });\n        this.canvas.add(circle);\n    };\n    return EventRenderer;\n}(Renderer_1.Renderer));\nexports.EventRenderer = EventRenderer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FacetRenderer = void 0;\nvar Renderer_1 = require(\"./Renderer\");\nvar Person_1 = require(\"../models/Person\");\nvar Event_1 = require(\"../models/Event\");\nvar PersonRenderer_1 = require(\"./PersonRenderer\");\nvar EventRenderer_1 = require(\"./EventRenderer\");\nvar EraRenderer_1 = require(\"./EraRenderer\");\nvar Lanes_1 = require(\"./Lanes\");\nvar FacetRenderer = /** @class */ (function (_super) {\n    __extends(FacetRenderer, _super);\n    function FacetRenderer(canvas, facet) {\n        var _this = _super.call(this, canvas) || this;\n        _this.name = facet.name;\n        _this.eras = facet.eras;\n        _this.lanes = new Lanes_1.Lanes();\n        var objects = facet.people\n            .concat(facet.events)\n            .sort(function (one, two) { return one.orderByStart(two); });\n        _this.lanes.addObjects(objects);\n        _this.basecolor = facet.basecolor;\n        return _this;\n    }\n    FacetRenderer.prototype.render = function (offset) {\n        var _this = this;\n        this.eras.forEach(function (era) {\n            return new EraRenderer_1.EraRenderer(_this.canvas, era).render(offset, _this.lanes.size() * (_this.LANE_HEIGHT + _this.LANE_PADDING), _this.basecolor);\n        });\n        offset += this.LANE_PADDING / 2;\n        this.lanes.getLanes().forEach(function (lane) {\n            lane.forEach(function (object) {\n                switch (true) {\n                    case object instanceof Person_1.Person:\n                        new PersonRenderer_1.PersonRenderer(_this.canvas, object).render(offset, _this.basecolor);\n                        break;\n                    case object instanceof Event_1.Event:\n                        new EventRenderer_1.EventRenderer(_this.canvas, object).render(offset, _this.basecolor);\n                        break;\n                }\n            });\n            offset += _this.LANE_HEIGHT + _this.LANE_PADDING;\n        });\n        return offset - this.LANE_PADDING / 2;\n    };\n    return FacetRenderer;\n}(Renderer_1.Renderer));\nexports.FacetRenderer = FacetRenderer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Lanes = void 0;\nvar Lanes = /** @class */ (function () {\n    function Lanes() {\n        this.lanes = [];\n    }\n    Lanes.prototype.size = function () {\n        return Object.keys(this.lanes).length;\n    };\n    Lanes.prototype.addLane = function () {\n        this.lanes[this.size()] = [];\n        return this.size() - 1;\n    };\n    Lanes.prototype.laneEnd = function (index) {\n        return this.lanes[index][this.lanes[index].length - 1].right();\n    };\n    Lanes.prototype.findLaneEndingBefore = function (date) {\n        for (var lane in Object.keys(this.lanes)) {\n            if (this.laneEnd(lane).plus({ years: 5 }) < date) {\n                return lane;\n            }\n        }\n        return this.addLane();\n    };\n    Lanes.prototype.addObject = function (object) {\n        var laneIndex = this.findLaneEndingBefore(object.left());\n        this.lanes[laneIndex].push(object);\n    };\n    Lanes.prototype.addObjects = function (objects) {\n        var _this = this;\n        objects.forEach(function (it) { return _this.addObject(it); });\n    };\n    Lanes.prototype.getLanes = function () {\n        return this.lanes;\n    };\n    return Lanes;\n}());\nexports.Lanes = Lanes;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PersonRenderer = void 0;\nvar Renderer_1 = require(\"./Renderer\");\nvar fabric_1 = require(\"fabric\");\nvar chroma_js_1 = __importDefault(require(\"chroma-js\"));\nvar HistoryCanvas_1 = require(\"../canvas/HistoryCanvas\");\nvar PersonRenderer = /** @class */ (function (_super) {\n    __extends(PersonRenderer, _super);\n    function PersonRenderer(canvas, person) {\n        var _this = _super.call(this, canvas) || this;\n        _this.name = person.name;\n        _this.birth = person.birth;\n        _this.death = person.death;\n        _this.events = person.events.sort(function (one, two) { return one.orderByStart(two); });\n        _this.shortName = person.shortName;\n        _this.url = person.url;\n        _this.left = HistoryCanvas_1.HistoryCanvas.calculateAbsoluteX(person.birth);\n        _this.width = HistoryCanvas_1.HistoryCanvas.calculateRelativeX(person.birth, person.death);\n        return _this;\n    }\n    PersonRenderer.prototype.render = function (offset, color) {\n        var _this = this;\n        var rect = new fabric_1.fabric.Rect({\n            fill: color.hex(),\n            left: this.left,\n            width: this.width,\n            top: offset,\n            height: this.LANE_HEIGHT,\n        });\n        var renderedEvents = this.events.map(function (it) { return _this.renderNestedEvent(it, offset, color); });\n        var textColor = color.luminance() > 0.4 ? (0, chroma_js_1.default)('black').hex() : (0, chroma_js_1.default)('white').hex();\n        var label = new fabric_1.fabric.Textbox(this.shortName, {\n            left: this.left + this.width / 2,\n            width: this.width,\n            top: offset + this.LANE_HEIGHT / 2,\n            originX: 'center',\n            originY: 'center',\n            fontSize: this.LANE_HEIGHT - 6,\n            textAlign: 'center',\n            strokeWidth: 0,\n            fill: textColor\n        });\n        var personGlyph = new fabric_1.fabric.Group(__spreadArray(__spreadArray([rect], renderedEvents, true), [label], false), {\n            tooltipText: this.buildPersonTooltip(),\n            fill: color.hex(),\n            url: this.url\n        });\n        this.canvas.add(personGlyph);\n    };\n    PersonRenderer.prototype.renderNestedEvent = function (event, offset, color) {\n        return new fabric_1.fabric.Circle({\n            fill: color.darken(0.3).hex(),\n            left: HistoryCanvas_1.HistoryCanvas.calculateAbsoluteX(event.date),\n            top: offset + this.LANE_HEIGHT / 2,\n            originY: 'center',\n            originX: 'center',\n            radius: this.LANE_HEIGHT * 3 / 8,\n            strokeWidth: 1,\n            stroke: color.darken(0.9).hex()\n        });\n    };\n    PersonRenderer.prototype.buildPersonTooltip = function () {\n        var events = this.events.length > 0 ? '\\n' + this.events.map(function (it) { return \"\".concat(it.name, \" (\").concat(it.date.year, \")\"); }).join(', ') : '';\n        return \"\".concat(this.name, \"\\n\").concat(this.birth.year, \" - \").concat(this.death.year).concat(events);\n    };\n    return PersonRenderer;\n}(Renderer_1.Renderer));\nexports.PersonRenderer = PersonRenderer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Renderer = void 0;\nvar Renderer = /** @class */ (function () {\n    function Renderer(canvas) {\n        this.LANE_HEIGHT = 20;\n        this.LANE_PADDING = 8;\n        this.canvas = canvas;\n    }\n    return Renderer;\n}());\nexports.Renderer = Renderer;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar InteractiveCanvas_1 = require(\"./canvas/InteractiveCanvas\");\nvar Parser_1 = require(\"./Parser\");\nvar data_json_1 = __importDefault(require(\"./data.json\"));\nvar parser = new Parser_1.Parser();\nvar facets = parser.parseData(data_json_1.default);\nvar canvas = new InteractiveCanvas_1.InteractiveCanvas();\ncanvas.render(facets);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktimeline\"] = self[\"webpackChunktimeline\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [861], () => (__webpack_require__(341)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","LANE_HEIGHT","GRID_COLOR","HOVER_COLOR","BACKGROUND_COLOR","DATE_SCALE_FACTOR","DATE_SCALE_UNIT","DATE_ORIGIN","fromISO","FIRST_TICK","LAST_TICK","local","__importDefault","this","mod","__esModule","Object","defineProperty","exports","value","Parser","chroma_js_1","Person_1","Era_1","Event_1","Facet_1","luxon_1","prototype","parseData","data","_this","facets","keys","map","facetName","Facet","eras","it","parseEra","people","parsePerson","events","parseEvent","sort","one","two","orderByStart","setColors","colorScale","default","scale","domain","length","forEach","index","basecolor","_a","name","start","end","_b","url","Era","parseDate","birth","death","_c","short_name","Person","date","Event","string","DateTime","startsWith","concat","substr","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","call","TypeError","String","__","constructor","create","HistoryCanvas","fabric_1","Properties_1","FacetRenderer_1","_super","fabric","selectable","Textbox","editable","fontFamily","initializeCanvas","setDimensions","width","window","innerWidth","height","innerHeight","hoverCursor","selection","absolutePan","Point","calculateAbsoluteX","renderOnAddRemove","ticks","getItem","id","i","len","size","getObjects","render","renderGrid","renderData","requestRenderAll","remove","apply","currentTick","plus","periodBetweenTicks","x","line","Line","viewportTransform","stroke","hex","strokeWidth","label","year","toString","left","top","originX","originY","fontSize","textAlign","fill","textBackgroundColor","gridline","Group","insertAt","push","Duration","fromObject","years","getZoom","tickCount","reduce","offset","facet","FacetRenderer","renderAll","calculateRelativeX","diff","as","Canvas","InteractiveCanvas","HistoryCanvas_1","supportResizing","addWheel","addHover","addTooltips","addWikipediaLinks","addKeyboardControl","that","onresize","on","event","wheelEvent","e","ctrlKey","_relativeZoom","deltaY","offsetX","offsetY","_pan","preventDefault","stopPropagation","amountHorizontal","amountVertical","newX","clamp","newY","delta","point","_absoluteZoom","_calculateAbsoluteZoom","zoom","absoluteZoom","zoomToPoint","original_viewportTransform","Math","ceil","floor","getHeight","lineId","options","getPointer","months","mouseLine","add","moveTo","target","tooltipText","y","tooltipBackground","Rect","brighten","setOptions","tooltip","open","document","onkeydown","key","min","max","right","Orderable","flat","orderByEnd","other","shortName","EraRenderer","Renderer_1","canvas","era","min_era_width_for_horizontal","color","rect","alpha","isWideEnough","angle","eraGlyph","Renderer","EventRenderer","circle","Circle","radius","PersonRenderer_1","EventRenderer_1","EraRenderer_1","Lanes_1","lanes","Lanes","objects","addObjects","LANE_PADDING","getLanes","lane","object","PersonRenderer","addLane","laneEnd","findLaneEndingBefore","addObject","laneIndex","__spreadArray","to","from","pack","arguments","ar","l","slice","person","renderedEvents","renderNestedEvent","textColor","luminance","personGlyph","buildPersonTooltip","darken","join","InteractiveCanvas_1","Parser_1","data_json_1","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","a","definition","o","enumerable","get","obj","prop","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}